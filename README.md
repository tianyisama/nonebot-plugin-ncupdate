# nonebot-plugin-ncupdate
æŒ‡ä»¤æ›´æ–°ncçš„å…¨è‡ªåŠ¨æ‡’äººæ’ä»¶ï¼Œé€šè¿‡æŒ‡ä»¤`æ›´æ–°nc`å³å¯å…¨è‡ªåŠ¨æ›´æ–°ncå¹¶è‡ªåŠ¨é‡è¿

# âš è­¦å‘Š
ç”±äºNTQQåœ¨9.9.12å‘ç”Ÿäº†å¤§èŒƒå›´æ”¹åŠ¨ï¼ŒNapCatçš„å¯åŠ¨æ–¹å¼å˜åŒ–å·¨å¤§ä¸”ä¸æ”¯æŒå¿«é€Ÿç™»å½•å’Œé‡å¯ï¼Œæœ¬æ’ä»¶æš‚ä¸é€‚ç”¨äº9.9.12ç‰ˆæœ¬åŠä»¥ä¸Šçš„NTQQ

å¦‚æœä½ çš„NTQQç‰ˆæœ¬ä¸º9.9.11åŠä»¥å‰ï¼Œæœ¬æ’ä»¶ä»ç„¶é€‚ç”¨

ä¸€æ‹³æŠŠä¼é¹…ğŸæ‰“é£ğŸ˜¡ğŸ‘Š

æ‹¾é›ªè¯´è€å¯åŠ¨æ–¹æ³•ä¼šå¤æ´»ï¼Œæ‰€ä»¥å…ˆå’•å’•å’• Cialloï½(âˆ ãƒ»Ï‰< )âŒ’â˜…!
## æ›´æ–°
### 6.28
- ä¿®å¤äº†ç”±äºncçªç„¶æ”¯æŒwin32å¯¼è‡´çš„win64ä½ä¸‹è½½å‡ºé”™çš„é—®é¢˜. ~~è¯´å¥½çš„æ²¡æœ‰æ”¯æŒwin32çš„æ‰“ç®—å‘¢(è¯è¯´çœŸçš„è¿˜æœ‰äººåœ¨ç”¨win32å—)~~
- æ–°å¢winç³»ç»Ÿcmdé—ªé€€å‘èµ·é‡è¿ï¼ˆæ‰‹åŠ¨å…³æ‰cmdä¹Ÿä¼šè§¦å‘é‡è¿è¯·æ±‚ï¼‰
- æ–°å¢æ–­çº¿10såå†å‘èµ·é‡è¿

## å®‰è£…
<details>
<summary>ä½¿ç”¨nb-cliå®‰è£…(æ¨è)</summary>


    nb plugin install nonebot-plugin-ncupdate
    

</details>

<details>
<summary>ä½¿ç”¨PIPå®‰è£…</summary>


    pip install nonebot-plugin-ncupdate
    
è‹¥å®‰è£…äº†è™šæ‹Ÿç¯å¢ƒï¼Œè¯·åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ“ä½œã€‚å®‰è£…å®Œæˆåï¼Œè¯·åœ¨ä½ çš„`bot.py`æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç æ¥å¯¼å…¥æ’ä»¶ï¼š
 `nonebot.load_plugin("nonebot_plugin_ncupdate")`
</details>

## è¯´æ˜
~~æ²¡ä¸Šä¼ åˆ°å•†åº—ä¹Ÿæ²¡æœ‰pypiï¼Œæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œä¸‹è½½æ›¿æ¢~~

**ç›®å‰åªæ”¯æŒ1.5.2åŠä»¥ä¸Šç‰ˆæœ¬çš„NapCat**ï¼Œæ­¤å‰ç‰ˆæœ¬æ²¡æœ‰é‡å¯ncç«¯çš„åŠŸèƒ½ï¼Œè¯·æ‰‹åŠ¨å°†ç‰ˆæœ¬å‡çº§åˆ°1.5.2ä»¥ç¡®ä¿åç»­ç‰ˆæœ¬çš„è‡ªåŠ¨æ›´æ–°

æ”¯æŒlinuxï¼Œæ”¯æŒè‡ªèº«è§¦å‘æ›´æ–°æˆ–é‡å¯ï¼Œæ”¯æŒé€‰æ‹©ä»£ç†


**è¯·æ‰“å¼€ä½ çš„napcatçš„httpæœåŠ¡ï¼Œå¦åˆ™æ— æ³•é‡å¯nc**ï¼Œå‰å¾€ncçš„è´¦å·é…ç½®æ–‡ä»¶(å¦‚onebot11_123456789.json)ï¼Œå°†ä¸‹éƒ¨åˆ†å†…å®¹çš„`enable`è®¾ç½®ä¸º`true`ï¼Œ`port`ä¸é…ç½®é¡¹`nc_http_port`è®¾ä¸ºä¸€è‡´
```json
"http": {
    "enable": true,
    "host": "",
    "port": 3000,
    "secret": "",
    "enableHeart": false,
    "enablePost": false,
    "postUrls": []
  },
```
æ”¯æŒæ–­çº¿é‡è¿ï¼ˆé»˜è®¤å…³é—­ï¼Œç›®å‰ä»…æ”¯æŒWindowsï¼‰ï¼Œ**ä¸æ˜¯å¼€æœºè‡ªè¿ï¼Œ~~ä¹Ÿä¸æ”¯æŒé—ªé€€é‡è¿~~**ï¼ˆncéƒ½é—ªé€€äº†ç³»ç»Ÿä¹Ÿè¯¥åŸ‹äº†xï¼‰

### æŒ‡ä»¤


- æ›´æ–°ncï¼ˆä»…è¶…çº§ç”¨æˆ·å¯ç”¨ï¼‰

- é‡å¯ncï¼ˆä»…è¶…çº§ç”¨æˆ·å¯ç”¨ï¼‰

- æŸšå­æ›´æ–°ncï¼ˆè‡ªèº«ä½œä¸ºbotè§¦å‘çš„æ›´æ–°æŒ‡ä»¤ï¼‰

- æŸšå­é‡å¯ncï¼ˆè‡ªèº«ä½œä¸ºbotè§¦å‘çš„é‡å¯æŒ‡ä»¤ï¼‰

å¦‚æœä½ éœ€è¦ä½¿ç”¨`æŸšå­æ›´æ–°nc`å’Œ`æŸšå­æ›´æ–°nc`ï¼Œåˆ™åº”å½“åœ¨ncçš„è´¦å·é…ç½®æ–‡ä»¶é‡Œæ‰“å¼€è‡ªèº«æ¶ˆæ¯ä¸ŠæŠ¥(è®¾ç½®ä¸ºtrue)
```json
  "reportSelfMessage": true,
```
### é…ç½®é¡¹

> ä»¥ä¸‹é…ç½®é¡¹å¯åœ¨ `.env.*` æ–‡ä»¶ä¸­è®¾ç½®ï¼Œå…·ä½“å‚è€ƒ [NoneBot é…ç½®æ–¹å¼](https://nonebot.dev/docs/appendices/config)

#### `base_path`

- é»˜è®¤ï¼š`C:\\napcat`
- è¯´æ˜ï¼šnapcatè¿è¡Œç›®å½•çš„ä¸Šçº§ç›®å½•è·¯å¾„ï¼Œä¾‹å¦‚åŸè¿è¡Œäº`E:\111\NapCat.win32.x64`ï¼Œåˆ™å¡«å†™`E:\\111`
- å¿…å¡«ï¼šå¦

#### `topfolder`

- é»˜è®¤ï¼š`NapCat.win32.x64`
- è¯´æ˜ï¼šnapcatè¿è¡Œç›®å½•çš„é¡¶çº§ç›®å½•åç§°ï¼Œä¾‹å¦‚åŸè¿è¡Œäº`E:\111\NapCat`ï¼Œåˆ™å¡«å†™`NapCat`
- å¿…å¡«ï¼šå¦

#### `napcat_mode`

- é»˜è®¤ï¼š`win`
- è¯´æ˜ï¼šnapcatçš„è¿è¡Œç³»ç»Ÿç±»å‹
- å¯é€‰ï¼šwinï¼Œwin_32ï¼Œlinuxï¼Œlinux_arm
- å¿…å¡«ï¼šå¦

#### `nc_proxy`

- é»˜è®¤ï¼š`false`
- è¯´æ˜ï¼šæ˜¯å¦é€šè¿‡ä»£ç†è¯·æ±‚GitHubæ›´æ–°
- å¯é€‰ï¼štrueï¼Œfalse
- å¿…å¡«ï¼šå¦

#### `nc_proxy_port`

- é»˜è®¤ï¼š`11451`
- è¯´æ˜ï¼šä»£ç†ä½¿ç”¨çš„ç«¯å£
- å¿…å¡«ï¼šå¦

#### `nc_http_port`

- é»˜è®¤ï¼š`3000`
- è¯´æ˜ï¼šnapcatçš„httpæœåŠ¡è¿è¡Œç«¯å£
- å¿…å¡«ï¼šå¦

#### `nc_self_update`

- é»˜è®¤ï¼š`"æŸšå­æ›´æ–°nc"`
- è¯´æ˜ï¼šå½“botæ˜¯è‡ªå·±çš„æ—¶å€™è§¦å‘çš„æ›´æ–°æŒ‡ä»¤
- å¿…å¡«ï¼šå¦

#### `nc_self_restart`

- é»˜è®¤ï¼š`"æŸšå­é‡å¯nc"`
- è¯´æ˜ï¼šå½“botæ˜¯è‡ªå·±çš„æ—¶å€™è§¦å‘çš„é‡å¯æŒ‡ä»¤
- å¿…å¡«ï¼šå¦

#### `nc_reconnect`

- é»˜è®¤ï¼š`false`
- è¯´æ˜ï¼šæ˜¯å¦å¼€å¯napcatæ‰çº¿é‡è¿ï¼ˆç›®å‰åªæ”¯æŒWindowsï¼‰
- å¯é€‰ï¼štrueï¼Œfalse
- å¿…å¡«ï¼šå¦

### é…ç½®ç¤ºä¾‹
> åªæœ‰è¦ç”¨åˆ°çš„æ‰å¡«å†™ï¼Œå¦‚æœç”¨ä¸åˆ°æˆ–è€…ä¸çŸ¥é“æ€ä¹ˆè®¾ç½®ï¼ŒæŠŠä½ çš„napcatè¿è¡Œç›®å½•å˜æˆ`C:\napcat\NapCat.win32.x64`å°±å¯ä»¥äº†
#### Windowsé…ç½®ç¤ºä¾‹
```ini
base_path=C:\\
topfolder=NapCat
napcat_mode=win
nc_proxy=true
nc_proxy_port=11451
nc_http_port=3000
nc_self_update="æ©˜å­æ›´æ–°nc"
nc_self_restart="æ©˜å­é‡å¯nc"
nc_reconnect=true
```
#### Linuxé…ç½®ç¤ºä¾‹
```ini
base_path=/root
topfolder=NapCat.linux.x64
napcat_mode=linux
nc_proxy=true
nc_proxy_port=11451
nc_http_port=3000
nc_self_update="æ©˜å­æ›´æ–°nc"
nc_self_restart="æ©˜å­é‡å¯nc"
nc_reconnect=false
```
## æŒ–å‘
- å‡†å¤‡å®ç°linuxæ–­çº¿é‡è¿
- ~~å‡†å¤‡ä¸Šä¼ åˆ°å•†åº—~~

## è‡´è°¢


- [Napcat](https://github.com/NapNeko/NapCatQQ)
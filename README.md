# nonebot-plugin-ncupdate
ç®¡ç†ncçš„å…¨è‡ªåŠ¨æ‡’äººæ’ä»¶ï¼Œä¸»è¦åº”ç”¨äºWindows
# âš è­¦å‘Š
æœ¬æ’ä»¶å«æœ‰å¤§é‡å±å±±ä»£ç 

ç”±äºæˆ‘æœ¬äººéå¸¸æ‡’ï¼Œå› æ­¤Linuxåªæ”¯æŒæ›´æ–°åŠé‡å¯

æ–°å¢çš„é…ç½®é¡¹`nc_restart_way`å¾ˆé‡è¦

å»ºè®®Windowsç”¨æˆ·é€‰æ‹©2æˆ–3çš„å¯åŠ¨æ–¹å¼

æ–­çº¿é‡è¿åªæ”¯æŒ2å’Œ3çš„å¯åŠ¨æ–¹å¼

~~æŸ¥çœ‹qqç‰ˆæœ¬åªæ”¯æŒWindows~~
## æ›´æ–°
### 10.1
- æ·»åŠ äº†LinuxæŸ¥çœ‹qqç‰ˆæœ¬ï¼ˆæ”¯æŒUbuntuï¼ŒCentosï¼ŒRockyï¼ŒDebianï¼‰
### 9.16
- æ·»åŠ äº†2.xç‰ˆæœ¬çš„é€‚é…
- ç§»é™¤äº†é…ç½®é¡¹`nc_http_port`ï¼Œæ–°å¢äº†é…ç½®é¡¹`nc_restart_way` `nc_self_qq_version` `nc_self_restart`
- æ–°å¢äº†æŒ‡ä»¤`ncæ£€æŸ¥æ›´æ–°` `æŸ¥çœ‹qq/QQç‰ˆæœ¬` `æŸšå­æ£€æŸ¥æ›´æ–°` `æŸšå­æŸ¥çœ‹qqç‰ˆæœ¬`ï¼ŒæŒ‡ä»¤`(æŸšå­)æ›´æ–°nc`æ–°å¢å¯æŒ‡å®šç‰ˆæœ¬ï¼Œä¾‹å¦‚`(æŸšå­)æ›´æ–°nc1.8.2`
- æ–°å¢å†…ç½®åˆ¤æ–­napcatæ˜¯å¦ä¸ntqqå…¼å®¹ï¼Œä¸å…¼å®¹ä¼šç»ˆæ­¢æ›´æ–°
- æ–°å¢å¤šç§å¯é€‰çš„å¯åŠ¨æ–¹å¼
### 7.29
- ç”±äºnbç«¯æ”¹ä»£ç å¯¼è‡´çš„reloadä¹Ÿä¼šè§¦å‘é‡è¿ï¼Œè€Œä¸”è¢«ç¡¬æ§åç§’(nbä¼šåœ¨æ‰§è¡Œå®Œä»£ç åå†å…³é—­)ã€‚æ¬¸ğŸ¤“ğŸ‘†ï¼Œæˆ‘æœ‰ä¸ªå¥½ç‚¹å­
- æ·»åŠ äº†è‡ªåŠ¨é‡è¿çš„çª—å£ï¼Œå¯é€‰æ‹©æ˜¯å¦ç«‹å³é‡å¯æˆ–å–æ¶ˆé‡å¯
### 7.14
- é€‚é…äº†9.9.12ç‰ˆæœ¬çš„ntqq
### 6.28
- ä¿®å¤äº†ç”±äºncçªç„¶æ”¯æŒwin32å¯¼è‡´çš„win64ä½ä¸‹è½½å‡ºé”™çš„é—®é¢˜. ~~è¯´å¥½çš„æ²¡æœ‰æ”¯æŒwin32çš„æ‰“ç®—å‘¢(è¯è¯´çœŸçš„è¿˜æœ‰äººåœ¨ç”¨win32å—)~~
- æ–°å¢winç³»ç»Ÿcmdé—ªé€€å‘èµ·é‡è¿ï¼ˆæ‰‹åŠ¨å…³æ‰cmdä¹Ÿä¼šè§¦å‘é‡è¿è¯·æ±‚ï¼‰
- æ–°å¢æ–­çº¿10såå†å‘èµ·é‡è¿

## å®‰è£…
<details>
<summary>ä½¿ç”¨nb-cliå®‰è£…(æ¨è)</summary>


    nb plugin install nonebot-plugin-ncupdate
    

</details>

<details>
<summary>ä½¿ç”¨PIPå®‰è£…</summary>


    pip install nonebot-plugin-ncupdate
    
è‹¥å®‰è£…äº†è™šæ‹Ÿç¯å¢ƒï¼Œè¯·åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ“ä½œã€‚å®‰è£…å®Œæˆåï¼Œè¯·åœ¨ä½ çš„`bot.py`æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç æ¥å¯¼å…¥æ’ä»¶ï¼š
 `nonebot.load_plugin("nonebot_plugin_ncupdate")`
</details>

## è¯´æ˜


æ”¯æŒè‡ªèº«è§¦å‘æ›´æ–°æˆ–é‡å¯ï¼Œæ”¯æŒé€‰æ‹©ä»£ç†ï¼Œæ”¯æŒè·å–QQç‰ˆæœ¬ä¸”è‡ªè¡Œåˆ¤æ–­æ˜¯å¦é€‚ç”¨æ–°ç‰ˆnapcatï¼ˆç›®å‰ä»…åˆ¤æ–­åˆ°2.5.4ï¼‰

æ”¯æŒæ–­çº¿é‡è¿ï¼ˆé»˜è®¤å…³é—­ï¼Œç›®å‰ä»…æ”¯æŒWindowsï¼Œä¸”åªæ”¯æŒåˆç‰ˆbatç™»å½•æ³•å’Œway03æ–¹æ³•ï¼‰

### æŒ‡ä»¤

- æŒ‡ä»¤çš†åªæœ‰è¶…çº§ç”¨æˆ·æˆ–è‡ªèº«å¯ç”¨

- æ›´æ–°nc

- é‡å¯nc

- æŸ¥çœ‹qq(QQ)ç‰ˆæœ¬/qqv

- ncæ£€æŸ¥æ›´æ–°

- æŸšå­æ›´æ–°ncï¼ˆè‡ªèº«ä½œä¸ºbotè§¦å‘çš„æ›´æ–°æŒ‡ä»¤ï¼‰

- æŸšå­é‡å¯ncï¼ˆè‡ªèº«ä½œä¸ºbotè§¦å‘çš„é‡å¯æŒ‡ä»¤ï¼‰

å¦‚æœä½ éœ€è¦ä½¿ç”¨`æŸšå­æ›´æ–°nc`å’Œ`æŸšå­æ›´æ–°nc`ï¼Œåˆ™åº”å½“åœ¨ncçš„è´¦å·é…ç½®æ–‡ä»¶é‡Œæ‰“å¼€è‡ªèº«æ¶ˆæ¯ä¸ŠæŠ¥(è®¾ç½®ä¸ºtrue)
```json
  "reportSelfMessage": true,
```
### é…ç½®é¡¹

> ä»¥ä¸‹é…ç½®é¡¹å¯åœ¨ `.env.*` æ–‡ä»¶ä¸­è®¾ç½®ï¼Œå…·ä½“å‚è€ƒ [NoneBot é…ç½®æ–¹å¼](https://nonebot.dev/docs/appendices/config)

#### `nc_restart_way` ï¼ˆé‡è¦æ–°å¢ï¼‰

- é»˜è®¤ï¼š`1`
- è¯´æ˜ï¼šnapcatè§¦å‘æ›´æ–°æˆ–é‡å¯æ—¶çš„é‡å¯æ–¹å¼
- å¯é€‰ï¼š

1.onebotæ¥å£çš„é‡å¯æ–¹å¼ï¼Œéƒ¨åˆ†napcatç‰ˆæœ¬æ¥å£æ˜¯åçš„ï¼ŒLinuxåªå¯é€‰ç”¨æ­¤æ–¹å¼ï¼ˆå› ä¸ºå…¶ä»–çš„æ²¡å†™ï¼‰
  
2.æ—§æ—¶ä»£ç‰ˆæœ¬napcat-utf8.batçš„å¯åŠ¨æ–¹å¼ï¼ŒQQç‰ˆæœ¬9.12ä¹‹åæ­¤æ–¹æ³•å·²å¤±æ•ˆ
  
3.way03ï¼šQQ.exeçš„å¯åŠ¨æ–¹å¼ï¼Œéœ€è¦æ›´æ”¹qqæ–‡ä»¶å¹¶é…ç½®è¡¥ä¸ï¼Œå…·ä½“å‚è€ƒ [way03å¯åŠ¨æ–¹å¼](https://napneko.github.io/zh-CN/guide/boot/shell/BootWay03)
  
4.way05ï¼šps1çš„å¯åŠ¨æ–¹å¼ï¼Œæ— éœ€æ›´æ”¹æ–‡ä»¶ä½†éœ€è¦æ›¿æ¢è¡¥ä¸ï¼Œå…·ä½“å‚è€ƒ [way05å¯åŠ¨æ–¹å¼](https://napneko.github.io/zh-CN/guide/boot/shell/BootWay05)
  
- å¿…å¡«ï¼šå¦
- è­¦å‘Šï¼šLinuxè¯·é€‰1ï¼ŒWindowsï¼šæœ€å¥½ä¸è¦é€‰1ï¼Œå› ä¸ºéƒ¨åˆ†ç‰ˆæœ¬æ¥å£åäº†ç”¨ä¸äº†ï¼Œ3å’Œ4çš„å¯åŠ¨æ–¹å¼åªå¯é€‰æ‹©ä¸€ä¸ªï¼ˆå› ä¸ºå¯ç”¨äº†way05åï¼Œway03æ–¹æ³•ä¼šå¤±æ•ˆï¼‰

#### `base_path`

- é»˜è®¤ï¼š`C:\\napcat`
- è¯´æ˜ï¼šnapcatè¿è¡Œç›®å½•çš„ä¸Šçº§ç›®å½•è·¯å¾„ï¼Œä¾‹å¦‚åŸè¿è¡Œäº`E:\111\NapCat.win32.x64`ï¼Œåˆ™å¡«å†™`E:\111`
- å¿…å¡«ï¼šå¦

#### `topfolder`

- é»˜è®¤ï¼š`NapCat.win32.x64`
- è¯´æ˜ï¼šnapcatè¿è¡Œç›®å½•çš„é¡¶çº§ç›®å½•åç§°ï¼Œä¾‹å¦‚åŸè¿è¡Œäº`E:\111\NapCat`ï¼Œåˆ™å¡«å†™`NapCat`
- å¿…å¡«ï¼šå¦

#### `napcat_mode`

- é»˜è®¤ï¼š`win`
- è¯´æ˜ï¼šnapcatçš„è¿è¡Œç³»ç»Ÿç±»å‹
- å¯é€‰ï¼šwinï¼Œwin_32ï¼Œlinuxï¼Œlinux_arm
- å¿…å¡«ï¼šå¦

#### `nc_proxy`

- é»˜è®¤ï¼š`false`
- è¯´æ˜ï¼šæ˜¯å¦é€šè¿‡ä»£ç†è¯·æ±‚GitHubæ›´æ–°
- å¯é€‰ï¼štrueï¼Œfalse
- å¿…å¡«ï¼šå¦

#### `nc_proxy_port`

- é»˜è®¤ï¼š`11451`
- è¯´æ˜ï¼šä»£ç†ä½¿ç”¨çš„ç«¯å£
- å¿…å¡«ï¼šå¦

#### `nc_self_update`

- é»˜è®¤ï¼š`"æŸšå­æ›´æ–°nc"`
- è¯´æ˜ï¼šå½“botæ˜¯è‡ªå·±çš„æ—¶å€™è§¦å‘çš„æ›´æ–°æŒ‡ä»¤
- å¿…å¡«ï¼šå¦

#### `nc_self_restart`

- é»˜è®¤ï¼š`"æŸšå­é‡å¯nc"`
- è¯´æ˜ï¼šå½“botæ˜¯è‡ªå·±çš„æ—¶å€™è§¦å‘çš„é‡å¯æŒ‡ä»¤
- å¿…å¡«ï¼šå¦

#### `nc_self_restart`

- é»˜è®¤ï¼š`"æŸšå­æ£€æŸ¥æ›´æ–°"`
- è¯´æ˜ï¼šå½“botæ˜¯è‡ªå·±çš„æ—¶å€™è§¦å‘çš„æ£€æŸ¥æ›´æ–°
- å¿…å¡«ï¼šå¦

#### `nc_self_qq_version`

- é»˜è®¤ï¼š`"æŸšå­æŸ¥çœ‹qqç‰ˆæœ¬"`
- è¯´æ˜ï¼šå½“botæ˜¯è‡ªå·±çš„æ—¶å€™è§¦å‘çš„æŸ¥çœ‹qqç‰ˆæœ¬
- å¿…å¡«ï¼šå¦

#### `nc_reconnect`

- é»˜è®¤ï¼š`false`
- è¯´æ˜ï¼šæ˜¯å¦å¼€å¯napcatæ‰çº¿é‡è¿ï¼ˆç›®å‰åªæ”¯æŒWindowsï¼‰
- å¯é€‰ï¼štrueï¼Œfalse
- å¿…å¡«ï¼šå¦

### é…ç½®ç¤ºä¾‹
> åªæœ‰è¦ç”¨åˆ°çš„æ‰å¡«å†™ï¼Œå¦‚æœç”¨ä¸åˆ°æˆ–è€…ä¸çŸ¥é“æ€ä¹ˆè®¾ç½®ï¼ŒæŠŠä½ çš„napcatè¿è¡Œç›®å½•å˜æˆ`C:\napcat\NapCat.win32.x64`å°±å¯ä»¥äº†
#### Windowsé…ç½®ç¤ºä¾‹
```ini
base_path=C:\\
topfolder=NapCat
napcat_mode=win
nc_proxy=true
nc_proxy_port=11451
nc_self_update="æ©˜å­æ›´æ–°nc"
nc_self_restart="æ©˜å­é‡å¯nc"
nc_reconnect=true
nc_self_check_update="æŸšå­æ£€æŸ¥æ›´æ–°"
nc_self_qq_version="æŸšå­æŸ¥çœ‹qqç‰ˆæœ¬"
nc_restart_way=1
```
å¦‚æœä½ ä½¿ç”¨çš„æ˜¯9.9.12ç‰ˆæœ¬çš„ntqqï¼Œé‚£ä¹ˆä»–åº”è¯¥ç±»ä¼¼äºè¿™æ ·
```ini
base_path=D:\qqnt\resources\app\app_launcher
topfolder=napcat
```
#### Linuxé…ç½®ç¤ºä¾‹
```ini
base_path=/root
topfolder=NapCat.linux.x64
napcat_mode=linux
nc_proxy=true
nc_proxy_port=11451
nc_self_update="æ©˜å­æ›´æ–°nc"
nc_self_restart="æ©˜å­é‡å¯nc"
nc_reconnect=false
nc_self_check_update="æŸšå­æ£€æŸ¥æ›´æ–°"
nc_self_qq_version="æŸšå­æŸ¥çœ‹qqç‰ˆæœ¬"
nc_restart_way=1
```
## æŒ–å‘
- å‡†å¤‡å®ç°linuxæ–­çº¿é‡è¿å’Œç›¸å…³åŠŸèƒ½
- å‡†å¤‡å¢åŠ åˆå§‹ä¸€é”®å®‰è£…napcat
- å‡†å¤‡å°†æœ€æ–°çš„å¯åŠ¨æ–¹å¼åŠ è¿›å»

## è‡´è°¢


- [Napcat](https://github.com/NapNeko/NapCatQQ)
